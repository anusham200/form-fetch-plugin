<div style="display: flex; justify-content: space-between; align-items: flex-start; width: 100%;">
    <div style="width: 48%; text-align: left; margin-top: -360px; margin-left: auto;">
        <h2>Custom Form</h2>
        <form method="post" action="<?php echo $block->getFormActionUrl() ?>" style="text-align: left;">
            <?php echo $block->getFormKeyHtml(); ?> <!-- Include Form Key -->

            <label for="email">Email ID:</label><br>
            <input type="email" id="email" name="email" placeholder="Enter your email" required><br><br>

            <label for="firstname">First Name:</label><br>
            <input type="text" id="firstname" name="firstname" placeholder="Enter your first name" required><br><br>

            <label for="lastname">Last Name:</label><br>
            <input type="text" id="lastname" name="lastname" placeholder="Enter your last name" required><br><br>

            <label for="schoolname">School Name:</label><br>
            <input type="text" id="schoolname" name="schoolname" placeholder="Enter your school name" required><br><br>

            <button type="submit" name="submit" style="background-color: rgb(0,105,169); color: white; border: none; padding: 10px 20px; cursor: pointer;">Submit</button><br><br>

        </form>

        <p><?php echo $block->getSuccessMessage(); ?></p>
    </div>
</div>

<div style="display: flex; justify-content: space-between; align-items: flex-start; width: 100%;">
    <div style="width: 48%; text-align: left; margin-top: -25px; margin-left: auto;">
        
        <form method="post" action="<?php echo $block->getFetchUrl(); ?>" style="text-align: left;">
            <!-- Additional Email field for "Fetch" -->
            <h3>Fetch Details</h3>
            <label for="fetch_email">Fetch:</label><br>
            <input type="email" id="fetch_email" name="fetch_email" placeholder="Enter email for fetch" style="border: 1px solid #ddd; padding: 8px; width: 100%;" required><br><br>
            
            <!-- Add form key for CSRF protection -->
            <input type="hidden" name="form_key" value="<?php echo $block->getFormKeyHtml(); ?>" />
            
            <button type="submit" name="fetch" style="background-color: rgb(0,105,169); color: white; border: none; padding: 10px 20px; cursor: pointer;">Fetch Details</button><br><br>
        </form>
        
    </div>
</div>

<?php 
$fetchedData = $block->getFetchedData();
$this->session->setFetchedData(null);
if (!empty($fetchedData)): ?>
    <h3>Fetched Data:</h3>
    <p><strong>Email:</strong> <?php echo htmlspecialchars($fetchedData['email']); ?></p>
    <p><strong>First Name:</strong> <?php echo htmlspecialchars($fetchedData['first_name']); ?></p>
    <p><strong>Last Name:</strong> <?php echo htmlspecialchars($fetchedData['last_name']); ?></p>
    <p><strong>School Name:</strong> <?php echo htmlspecialchars($fetchedData['school_name']); ?></p>
<?php else: ?>
    <p>No data found for the provided email.</p>
<?php endif; ?>



<head>
    <link rel="stylesheet" type="text/css" href="<?php echo $block->getViewFileUrl('Custom_FormFetchPlugin::css/styles.css'); ?>">
</head>
